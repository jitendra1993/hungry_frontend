 <div class="page-header">	<div class="row">		<div class="col-md-6 col-sm-12">			<div class="title">				<h4>Order List</h4>			</div>			<nav aria-label="breadcrumb" role="navigation">				<ol class="breadcrumb">					<li class="breadcrumb-item"><a href="#">Home</a></li>					<li class="breadcrumb-item active" aria-current="page">Order List</li>				</ol>			</nav>		</div>		<div class="col-md-6 col-sm-12 text-right">					</div>	</div></div><div class="pd-20 bg-white border-radius-4 box-shadow mb-30"><?php if($this->session->flashdata('msg_success')){ ?>  <div class="alert alert-success alert-dismissible"> 	<button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>	<?=($this->session->flashdata('msg_success'))?>   </div>  <?php } ?><div class="clearfix mb-20">	 <div class="col-md-12 row">			<h4 class="text-blue h4 ">Search</h4>		</div>	<div class="col-md-12 row mb-30">		<form name="filter"id="filter" method="GET" action="<?=base_url('admin/dm/tasks/view')?>">		<div class="row">		  <div class="col-sm-3">			 <input type="text" name="filter_name" value="<?php echo  isset($filters['filter_name'])?$filters['filter_name']:''; ?>" placeholder="Search"  class="form-control" />		  </div>	  	  		  <div class="col-sm-2">			   <input type="text" name="filter_from_date" value="<?php echo  isset($filters['filter_from_date'])?$filters['filter_from_date']:''; ?>" placeholder="From Date"  class="form-control datepicker1" readonly />		  </div>	  		  <div class="col-sm-2">		 			  <input type="text" name="filter_to_date" value="<?php echo  isset($filters['filter_to_date'])?$filters['filter_to_date']:''; ?>" placeholder="To Date"  class="form-control datepicker1" readonly />		  </div>		  		  <div class="col-sm-2">			<select name="filter_status" id="filter_status" class="form-control" >				<option value="">Select Status</option>				<option value="failed" <?=(isset($filters['filter_status'])  && $filters['filter_status'] == 'failed')?'selected':''?>>Failed</option>				<option value="inprogress" <?=(isset($filters['filter_status'])  && $filters['filter_status'] == 'inprogress')?'selected':''?>>In progress</option>				<option value="started" <?=(isset($filters['filter_status'])  && $filters['filter_status'] == 'started')?'selected':''?>>Started</option>				<option value="rejected" <?=(isset($filters['filter_status'])  && $filters['filter_status'] == 'rejected')?'selected':''?>>Rejected</option>				<option value="cancelled" <?=(isset($filters['filter_status'])  && $filters['filter_status'] == 'cancelled')?'selected':''?>>Cancelled</option>				<option value="delivered" <?=(isset($filters['filter_status'])  && $filters['filter_status'] == 'delivered')?'selected':''?>>Delivered</option>				<option value="out" <?=(isset($filters['filter_status'])  && $filters['filter_status'] == 'out')?'selected':''?>>Out for delivery</option>			</select>		</div>					  <div class="col-sm-3">			<button type="submit" id="button-filter"  class="btn btn-primary"><i class="fa fa-filter"></i> Filter</button>		 </div>		</div>		</form>	</div>  		<div class="table-responsive">		<table class="table table-striped table-bordered">			<thead>				<tr>					<th scope="col">Order #</th>					<th scope="col">Name</th>					<th scope="col">Order Type</th>					<th scope="col">Address</th>					<th scope="col">Driver Name</th>					<th scope="col">Status</th>					<th scope="col">Assigned</th>					<th scope="col">Action</th>				</tr>			</thead>			<tbody>			 <?php 			if(isset($orders) && count($orders)>0)			{							 foreach($orders as $order){								$status ='';				$st = $order->status;							if($st==0 && $order->payment_type==2)				{					if($order->payment_status==2)					{						$status ='<span class="badge badge-danger">Payment Pending</span>';					}else if($order->payment_status==3)					{						$status ='<span class="badge badge-danger">Payment Cancelled</span>';					}else if($order->payment_status==4)					{						$status ='<span class="badge badge-danger">Payment Decline</span>';					}													}				else if($st==1)				{					$status ='<span class="badge badge-primary">New</span>';				}else if($st==2)				{					$status ='<span class="badge badge-primary">Read</span>';				}else if($st==3)				{					$status ='<span class="badge badge-success">Accepted</span>';				}else if($st==4)				{					$status ='<span class="badge badge-danger">Rejected</span>';				}else if($st==5)				{					$status ='<span class="badge badge-warning">pending</span>';				}else if($st==6)				{					$status ='<span class="badge badge-danger">Cancelled</span>';				}else if($st==7)				{					$status ='<span class="badge badge-primary">Out for delivery</span>';				}else if($st==8)				{					$status ='<span class="badge badge-success">Delivered</span>';				}else if($st==9)				{					$status ='<span class="badge badge-success">Served</span>';				}				else if($st==10)				{					$status ='<span class="badge badge-primary">started</span>';				}				else if($st==11)				{					$status ='<span class="badge badge-primary">Inprogress</span>';				}				else if($st==12)				{					$status ='<span class="badge badge-danger">Failed</span>';				}									if($order->order_type==1)				{					$order_type = 'Pickup';				}else if($order->order_type==2)				{					$order_type = 'Delivery';				}else if($order->order_type==3)				{					$order_type = 'Dinein';				}								$assign ='<span class="badge badge-danger">Unassigned</span>';				if($order->drivername)				{					$assign ='<span class="badge badge-primary">Assigned</span>';				}													$address_detail = substr($order->address_detail, 1, -1);				$address_detail =  stripslashes(html_entity_decode($address_detail));				$address_detail = json_decode($address_detail,TRUE);				$address = $address_detail['name'].'<br>'.$address_detail['addressLine1'].' ,'.$address_detail['addressLine2'].'<br>'.$address_detail['pincode'];								 ?>				<tr>					<th scope="row"><?php echo $order->order_id; ?></th>					<td><?=!empty($order->name)?$order->name:$order->guest_name.'<br>(Guest)'?></td>					<td><?=$order_type;?></td>					<td><?=$address;?></td>					<td class="driver_name_<?php echo $order->order_id; ?>"><?=$order->drivername;?></td>					<td class="status_<?php echo $order->order_id; ?>" ><?php echo $status;?></td>					<td class="assign_status_<?php echo $order->order_id; ?>"><?php echo $assign;?></td>					<td>					<a href="javascript:void(0)" data-id="<?=$order->order_id?>" user-id="<?=$order->user_id?>" class="badge badge-secondary view-order" data-toggle="tooltip" data-placement="top" title="View"><i class="fa fa-eye"></i></a>										<?php 					if($order->drivername){ ?>						<a href="javascript:void(0)" data-id="<?=$order->order_id;?>" user-id="<?=$order->user_id?>" team-id="<?=$order->team_id?>"  driver-id="<?=$order->driver_id?>" class="badge badge-primary view-assign-order-detail" data-toggle="tooltip" data-placement="top" title="Assign Detail">Details</a>					<?php }else{						?>						<span class="assgin_click_<?php echo $order->order_id; ?>">						<a href="javascript:void(0)" id="order_id_status_<?php echo $order->order_id;?>" user-id="<?=$order->user_id?>"  data-id="<?php echo $order->order_id;?>" class="badge badge-secondary assign-order-popup" data-toggle="tooltip" data-placement="top"  title="Assign to driver">Assign</a>						</span>					<?php }					?>										</td>				</tr>				 <?php  }				 } else{			echo '<tr class="text-center"><td colspan=15>No record found</td></tr>';					} ?>			</tbody>		</table>		 <p><?php echo $links; ?></p>	</div></div></div><div class="modal fade" id="assignOrderModal" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">  <div class="modal-dialog" role="document">    <div class="modal-content">      <div class="modal-header">        <h5 class="modal-title" id="exampleModalLabel">Order id- <span class="task_id"></span></h5>               <button type="button" class="close align-center" data-dismiss="modal" aria-label="Close">          <span aria-hidden="true">&times;</span>        </button>      </div>      <div class="modal-body">        <div class="form-box">		<input type='hidden' name='order_id' id="order_id" value=''>		<input type='hidden' name='user_id' id="user_id" value='' class="user_id">				<div class="col-md-12 form-group">			<h6>Select Team</h6>			<select name="team_id" id="team_id" class="form-control">			<option value="" selected>Select Team</option>			<?php 			if(isset($team) && !empty($team) && is_array($team) && count($team)>0){				foreach($team as $key=>$value){					echo '<option value="'.$key.'">'.$value.'</option> ';				}							} 			?>			</select>			<span class="error has-danger team_id_error"></span>		</div>				 <div class="col-md-12 form-group">			<h6>Assign Agent</h6>			<select name="driver_id" id="driver_id" class="form-control">			<option value="" selected>Select Driver</option>			<?php 			if(isset($team) && !empty($team) && is_array($team) && count($team)>0){				foreach($team as $key=>$value){					echo '<option value="'.$key.'">'.$value.'</option> ';				}							} 			?>			</select>			<span class="error has-danger driver_id_error"></span>		</div>		<br>		<div class="search-icon">			<button type="button" class="btn btn-success assignOrderClick">Submit</button>			 <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>		</div>		</div>      </div>    </div>  </div></div><!-- Order detail view--><div class="modal fade" id="viewOrderDetail" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">    <span class="appendOrderDetail"></span></div><div class="modal fade" id="changeStatusModal" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">  <div class="modal-dialog" role="document">    <div class="modal-content">      <div class="modal-header">        <h5 class="modal-title" id="exampleModalLabel">Change Status</h5>               <button type="button" class="close align-center" data-dismiss="modal" aria-label="Close">          <span aria-hidden="true">&times;</span>        </button>      </div>      <div class="modal-body">        <div class="form-box">		<input type='hidden' name='task_order_id' id="task_order_id" value=''>		<div class="col-md-12 form-group">			<select name="new_status" id="new_status" class="form-control">				<option value="" selected="selected">Please select status</option>				<option value="10">Started</option>				<option value="11">Inprogress</option>				<option value="7">Out for delivery</option>				<option value="8">Delivered</option>				<option value="12">Failed</option>				<option value="4">Reject</option>				<option value="6">Cancelled</option>			</select>			<span class="error has-danger new_status_error"></span>		</div>							 <br>		<div class="search-icon">			<button type="button" class="btn btn-success changeTaskStatus">Submit</button>			 <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>		</div>	</div>      </div>    </div>  </div></div>